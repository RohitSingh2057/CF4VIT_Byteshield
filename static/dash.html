<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ByteShield | Intent-Aware Security</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
:root {
  --bg-panel: rgba(255,255,255,0.06);
  --accent-blue:#7dd3fc;
  --accent-ice:#e0f2fe;
  --danger:#fb7185;
  --warning:#fbbf24;
  --success:#86efac;
}

body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  color:#e5e7eb;
  background:
    radial-gradient(circle at 20% 30%, rgba(125,211,252,0.08), transparent 40%),
    linear-gradient(135deg,#030712,#081225,#020617);
}

.container{
  max-width:1200px;
  margin:auto;
  padding:50px 40px;
}

h1{
  font-family:'Orbitron',sans-serif;
  font-size:64px;
}

h1 a{
  text-decoration:none;
  background:linear-gradient(90deg,#e0f2fe,#7dd3fc);
  background-clip: text;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.tagline{
  font-family:'Orbitron';
  font-size:26px;
  color:#cbd5e1;
  margin-bottom:35px;
}

.intro{
  padding:28px;
  border-radius:18px;
  background:linear-gradient(135deg,rgba(255,255,255,0.09),rgba(255,255,255,0.03));
  margin-bottom:45px;
}

.kpi-container{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:20px;
  margin-bottom:35px;
}

.kpi{
  padding:26px;
  border-radius:20px;
  background:var(--bg-panel);
  text-align:center;
}

.kpi-value{
  font-size:42px;
  font-weight:700;
}

.kpi span{font-size:14px;opacity:0.8}

.human{color:var(--accent-ice)}
.malicious{color:var(--danger)}
.normal{color:var(--success)}
.alerts{color:var(--warning)}

.tabs{
  display:flex;
  gap:18px;
  margin-bottom:25px;
}

.tab{
  padding:14px 26px;
  border-radius:999px;
  background:rgba(255,255,255,0.08);
  cursor:pointer;
}

.tab.active{
  background:linear-gradient(90deg,#7dd3fc,#c7d2fe);
  color:#020617;
  font-weight:600;
}

.tab-content{
  display:none;
  background:var(--bg-panel);
  padding:32px;
  border-radius:22px;
}

.tab-content.active{display:block}

.graph{
  height:240px;
  border-radius:18px;
  background:repeating-linear-gradient(
    135deg,
    rgba(226,232,240,0.35) 0px,
    rgba(226,232,240,0.35) 10px,
    rgba(148,163,184,0.35) 10px,
    rgba(148,163,184,0.35) 20px
  );
  display:flex;
  align-items:center;
  justify-content:center;
  color:#020617;
  font-weight:600;
  margin-bottom:25px;
}

.bar{margin-bottom:16px}
.bar-fill{height:12px;border-radius:8px;margin-top:6px}
.low{width:30%;background:#86efac}
.medium{width:55%;background:#7dd3fc}
.high{width:80%;background:#fb7185}

button{
  margin:30px 0;
  padding:14px 30px;
  border-radius:999px;
  border:none;
  cursor:pointer;
  background:linear-gradient(90deg,#7dd3fc,#c7d2fe);
  font-weight:600;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}

th,td{
  padding:14px;
  font-size:14px;
  border-bottom:1px solid rgba(255,255,255,0.1);
}

tr.human-row{background:rgba(125,211,252,0.15)}
tr.malicious-row{background:rgba(251,113,133,0.15)}
</style>
</head>

<body>
<div class="container">

<h1><a href="#">ByteShield</a></h1>
<div class="tagline">Flagging real threats, not you.</div>

<div class="intro">
ByteShield classifies suspicious behavior by intent â€” using historical context,
session patterns, and deviation analysis to reduce alert fatigue.
</div>

<div class="kpi-container">
<div class="kpi human"><div class="kpi-value" id="humanCount">0</div><span>Human Errors</span></div>
<div class="kpi malicious"><div class="kpi-value" id="maliciousCount">0</div><span>Malicious Events</span></div>
<div class="kpi normal"><div class="kpi-value" id="normalCount">0</div><span>Normal Sessions</span></div>
<div class="kpi alerts"><div class="kpi-value" id="alertCount">0</div><span>Total Events</span></div>
</div>

<div class="tabs">
<div class="tab active" onclick="openTab(event,'events')">Security Events</div>
<div class="tab" onclick="openTab(event,'today')">Today's Behavior Snapshot</div>
<div class="tab" onclick="openTab(event,'week')">7-Day Behavior Trend</div>

</div>

<div id="today" class="tab-content">
<h3>Todayâ€™s Behavior Snapshot</h3>
<div class="graph">ðŸ“Š Live Behavioral Signals</div>
<div class="bar"><span>Failed Logins</span><div class="bar-fill high"></div></div>
<div class="bar"><span>Browser Change</span><div class="bar-fill medium"></div></div>
<div class="bar"><span>Unusual Time Access</span><div class="bar-fill low"></div></div>
</div>

<div id="week" class="tab-content">
<h3>7-Day Behavior Trend</h3>
<div class="graph">ðŸ“ˆ Rolling Baseline Trends</div>
<ul>
<li>Login behavior remains near baseline</li>
<li>Alert downgrades reduced escalation</li>
<li>No lateral movement detected</li>
</ul>
</div>

<button onclick="evaluateTestSession()">Simulate New Session</button>

<div id="events" class="tab-content active">
<h3>Security Events</h3>
<table>
<thead>
<tr><th>User</th><th>Time</th><th>Risk</th><th>Severity</th><th>Explanation</th></tr>
</thead>
<tbody id="eventsTable"></tbody>
</table>
</div>

</div>

<script>
function openTab(evt,id){
document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
evt.currentTarget.classList.add('active');
document.getElementById(id).classList.add('active');
}

async function evaluateTestSession() {
  const payload = {
    user_id: Math.floor(Math.random() * 500) + 1,
    timestamp: new Date().toISOString(),
    login_attempts: Math.floor(Math.random() * 10) + 1,
    failed_logins: Math.floor(Math.random() * 6),
    session_duration: Math.random() * 1200 + 200,
    data_volume: Math.floor(Math.random() * 12000) + 500,
    unusual_time_access: Math.random() > 0.6 ? 1 : 0,
    ip_reputation_score: Math.random(),
    browser_type: Math.random() > 0.7 ? "Unknown" : "Chrome"
  };

  const response = await fetch("/evaluate-session", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  }
);

  const result = await response.json();
  updateDashboard(result);
}

function updateDashboard(result) {
  alertCount.innerText= parseInt(alertCount.innerText) + 1;

  if (result.flag && result.severity === "HIGH") {
    maliciousCount.innerText = parseInt(maliciousCount.innerText) + 1;
  }else if(result.flag){
    humanCount.innerText = parseInt(humanCount.innerText)+1;
  }
  else{
    normalCount.innerText = parseInt(normalCount.innerText) + 1;
  }

  const row = document.createElement("tr");
  row.className = result.severity === "HIGH" ? "malicious-row" : "human-row";

  row.innerHTML = `
    <td>${result.user_id}</td>
    <td>${new Date(result.timestamp).toLocaleTimeString()}</td>
    <td>${result.risk_score}</td>
    <td>${result.severity}</td>
    <td>${result.reason}</td>
  `;

  eventsTable.prepend(row);
}
</script>
</body>
</html>